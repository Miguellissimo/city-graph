!function(){function t(){navigator.geolocation.getCurrentPosition(function(t){var o=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);a.setCenter(o)})}function o(t){var o=t.latLng.lat(),n=t.latLng.lng();a.setCenter(t.latLng),a.setZoom(10),GoogleMapsFunctions.getCityNameFromCoordinates(o,n,function(t){console.log(t),InstagramFunctions.getPopularImages(t,g,function(t){function g(t){return math.matrix([[math.cos(t),math.sin(t)],[-math.sin(t),math.cos(t)]])}if(e.length>0){for(var i=0;i<e.length;i++)e[i].setMap(null);e=[]}for(var l=[.3,0],r=math.PI/4,s=[],c=0;c<2*math.PI;c+=r){var m=math.multiply(g(c),l);m._data[0]=m._data[0]/2,s.push(math.add(m,[o,n]))}for(console.log(s),c=0;c<s.length;c++){var h=new google.maps.Marker({position:new google.maps.LatLng(s[c]._data[0],s[c]._data[1]),map:a,icon:t[c][1]});e.push(h),h.postUrl=t[c][0],h.addListener("click",function(){window.open(this.postUrl)})}})})}function n(){var n={center:new google.maps.LatLng(0,0),zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP},g=document.getElementById("googleMap");a=new google.maps.Map(g,n),t(),a.addListener("zoom_changed",function(){if(e.length>0){for(var t=0;t<e.length;t++)e[t].setMap(null);e=[]}}),google.maps.event.addListener(a,"click",o);var i=$(window).height()-$("header").height()-$(".searchControls").height();$("#googleMap").height(i)}var a,e=[],g=8;$(document).ready(function(){n()})}();