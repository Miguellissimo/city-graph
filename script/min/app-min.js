!function(){function t(){navigator.geolocation.getCurrentPosition(function(t){var o=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);g.setCenter(o)})}function o(t){for(var t=this,o=t.getPosition(),n=t.originalLat-o.lat(),e=t.originalLng-o.lng(),a=n/50,g=e/50,i=0;50>i;i++)setTimeout(function(){var o=t.getPosition().lat()+a,n=t.getPosition().lng()+g;t.setPosition(new google.maps.LatLng(o,n))},50)}function n(t,n,e){function a(t){return math.matrix([[math.cos(t),math.sin(t)],[-math.sin(t),math.cos(t)]])}if(i.length>0){for(var s=0;s<i.length;s++)i[s].setMap(null);i=[]}for(var l=[.3,0],r=math.PI/4,c=[],m=0;m<2*math.PI;m+=r){var u=math.multiply(a(m),l);u._data[0]=u._data[0]/2,c.push(math.add(u,[n,e]))}for(console.log(c),m=0;m<c.length;m++){var h=new google.maps.Marker({position:new google.maps.LatLng(c[m]._data[0],c[m]._data[1]),map:g,icon:t[m][1]});i.push(h),h.postUrl=t[m][0],h.originalLat=n,h.originalLng=e,h.addListener("click",o)}}function e(t){var o=t.latLng.lat(),e=t.latLng.lng();g.setCenter(t.latLng),g.setZoom(10),GoogleMapsFunctions.getCityNameFromCoordinates(o,e,function(t){console.log(t),InstagramFunctions.getRecentImages(t,s,o,e,n)})}function a(){var o={center:new google.maps.LatLng(0,0),zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP},n=document.getElementById("googleMap");g=new google.maps.Map(n,o),t(),g.addListener("zoom_changed",function(){if(i.length>0){for(var t=0;t<i.length;t++)i[t].setMap(null);i=[]}}),google.maps.event.addListener(g,"click",e);var a=$(window).height()-$("header").height()-$(".searchControls").height();$("#googleMap").height(a)}var g,i=[],s=8;$(document).ready(function(){a(),$("#searchButton").click(function(){var t=$("#searchInput").val();console.log(t),GoogleMapsFunctions.getCoordinatesFromCityName(t,function(o){var e=o.lat,a=o.lng;InstagramFunctions.getRecentImages(t,s,e,a,n),g.setCenter(new google.maps.LatLng(e,a)),g.setZoom(10)})})})}();